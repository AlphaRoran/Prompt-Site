<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <title>Prompt Templates</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class' };
  </script>
  <link rel="stylesheet" href="style.css">
</head>
<body class="bg-white dark:bg-gray-900 text-black dark:text-white min-h-screen">

  <div class="max-w-3xl mx-auto p-6">
    <header class="flex justify-between items-center mb-6">
      <h1 class="text-2xl font-bold">ðŸ“‚ Prompt Templates</h1>
      <button id="darkToggle" class="px-4 py-1 rounded bg-gray-800 text-white dark:bg-white dark:text-black">
        Toggle Theme
      </button>
    </header>

    <!-- Navigation -->
    <nav class="mb-6 flex gap-4 text-lg">
      <a href="index.html" class="hover:underline">Prompt Builder</a>
      <a href="templates.html" class="hover:underline font-bold">Templates</a>
      <a href="agents.html" class="hover:underline">AI Agents</a>
    </nav>

    <!-- Add New Template -->
    <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded mb-6">
      <h2 class="text-lg font-semibold mb-2">âž• Create New Template</h2>
      <input id="templateName" type="text" placeholder="Template name..." class="w-full p-2 mb-2 border rounded dark:bg-gray-900 dark:text-white">
      <textarea id="templateContent" placeholder="Paste your full prompt here..." class="w-full p-2 border rounded h-32 dark:bg-gray-900 dark:text-white"></textarea>
      <button onclick="saveTemplate()" class="mt-3 w-full bg-blue-600 text-white px-4 py-2 rounded">ðŸ’¾ Save Template</button>
    </div>

    <!-- Template List -->
    <div>
      <h2 class="text-lg font-semibold mb-2">ðŸ—‚ Saved Templates</h2>
      <ul id="templateList" class="space-y-3"></ul>
    </div>

    <!-- Export / Import -->
    <div class="mt-8 flex flex-col md:flex-row gap-4">
      <button onclick="exportTemplates()" class="bg-green-700 text-white px-4 py-2 rounded w-full">ðŸ“¤ Export Templates (JSON)</button>
      <input type="file" id="importFile" onchange="importTemplates()" class="block text-sm text-gray-500 dark:text-gray-400">
    </div>
  </div>

  <script>
    document.getElementById('darkToggle').addEventListener('click', () => {
      document.documentElement.classList.toggle('dark');
    });

    function saveTemplate() {
      const name = document.getElementById('templateName').value.trim();
      const content = document.getElementById('templateContent').value.trim();
      if (!name || !content) return alert("Please enter both name and prompt.");
      const templates = JSON.parse(localStorage.getItem('promptTemplates')) || [];
      templates.push({ name, content });
      localStorage.setItem('promptTemplates', JSON.stringify(templates));
      document.getElementById('templateName').value = '';
      document.getElementById('templateContent').value = '';
      loadTemplates();
    }

    function deleteTemplate(index) {
      const templates = JSON.parse(localStorage.getItem('promptTemplates')) || [];
      templates.splice(index, 1);
      localStorage.setItem('promptTemplates', JSON.stringify(templates));
      loadTemplates();
    }

    function loadTemplates() {
      const list = document.getElementById('templateList');
      const templates = JSON.parse(localStorage.getItem('promptTemplates')) || [];
      list.innerHTML = '';
      templates.forEach((t, i) => {
        const li = document.createElement('li');
        li.className = "p-3 border rounded bg-gray-100 dark:bg-gray-800";

        li.innerHTML = `
          <div class="flex justify-between items-center">
            <strong>${t.name}</strong>
            <button onclick="deleteTemplate(${i})" class="text-red-500 text-sm">ðŸ—‘ Delete</button>
          </div>
          <pre class="mt-2 whitespace-pre-wrap text-sm text-gray-700 dark:text-gray-300">${t.content}</pre>
        `;
        list.appendChild(li);
      });
    }

    function exportTemplates() {
      const templates = localStorage.getItem('promptTemplates');
      const blob = new Blob([templates], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "prompt-templates.json";
      a.click();
      URL.revokeObjectURL(url);
    }

    function importTemplates() {
      const file = document.getElementById("importFile").files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function (e) {
        try {
          const data = JSON.parse(e.target.result);
          localStorage.setItem("promptTemplates", JSON.stringify(data));
          loadTemplates();
          alert("âœ… Templates imported!");
        } catch (err) {
          alert("Invalid JSON file.");
        }
      };
      reader.readAsText(file);
    }

    loadTemplates();
  </script>
</body>
</html>
